<html>
<head></head>
<script src="../js/jquery.min.js"></script>
<body>
<form action="" method="post"">
<table>
	<tr>
		<td>AppId</td>
		<td><input type="text" id="AppId" value="${AppId!}" /></td>
	</tr>
	<tr>
		<td>AppSecret</td>
		<td><input type="text" id="AppSecret" value="${AppSecret!}"  style="width:250px;"/></td>
	</tr>
	<tr>
		<td>Token</td>
		<td><input type="text" id="Token" value="${Token!}" /></td>
	</tr>
	<tr>
		<td>EncodingAESKey</td>
		<td><input type="text" id="EncodingAESKey"  style="width:400px;"
			value="${EncodingAESKey!}" /></td>
	</tr>
	<tr>
		<td>回调测试</td>
		<td><input type="button" value="开始测试" id="btn1" /></td>
	</tr>
	<tr>
		<td>消息测试</td>
		<td>
			<input type="button" value="明文测试" id="btn2" />
			<input type="button" value="密文测试" id="btn3" />
		</td>
	</tr>
	<tr>
		<td>菜单测试</td>
		<td>
			<textarea id="menu" style="width:700px;height:100px;">
{"button":[
{"name":"公司动态","sub_button":[{"type":"click","name":"最新动态","key":"2","sub_button":[]},
{"type":"click","name":"最新分享","key":"3","sub_button":[]},
{"type":"view","name":"留言表","url":"http://dinglantech.com.cn/weixin/share/commentList","sub_button":[]},
{"type":"view","name":"签到表","url":"http://dinglantech.com.cn/weixin/share/gpsList","sub_button":[]}
]},
{"name":"快速分享","sub_button":[{"type":"pic_photo_or_album","name":"照片分享","key":"rselfmenu_1_1","sub_button":[]},{"type":"scancode_waitmsg","name":"二维码分享","key":"rselfmenu_0_0","sub_button":[]},{"type":"location_select","name":"位置分享","key":"rselfmenu_2_0","sub_button":[]}]},
{"name":"工具箱","sub_button":[{"type":"click","name":"重要电话","key":"1","sub_button":[]},{"type":"click","name":"通讯录","key":"11","sub_button":[]},{"type":"click","name":"我是谁","key":"9","sub_button":[]}]}
]}
			</textarea>
			<br>
			<input type="button" value="创建菜单" id="btn4" />
			<input type="button" value="获取菜单" id="btn5" />
		</td>
	</tr>
</table>
<span id="msg" style="color:red"></span>
<script>
$("#btn1").click(function(e){
	$("#msg").html("...");

	var url="../qy/?";
	url+="msg_signature=c4eb00b041686352e79086a41431eebe60b682c0"
	url+="&timestamp=1416187783&nonce=1766739666";
	url+="&echostr="+encodeURIComponent("PPlWjtSU58hBx/LjqqC+sGp3vYw3pvj+s5piC9IcwLrXMoATImSOX9+0Mo8eCW80UDEEUOX21WWVHZf6dtNfQw==");

	$.post(url,{},function(ret){
	    $("#msg").html(ret);
	});
});
$("#btn2").click(function(e){
	var url="../weixin/?";
	url+="signature=70e08c27adaba2bebdc8545951bee8b7ba0f8581&timestamp=1416046629&nonce=69799373";
	var xml="<xml><URL><![CDATA[http://www.dinglantech.com.cn/webapp/weixin/?signature=70e08c27adaba2bebdc8545951bee8b7ba0f8581&timestamp=1416046629&nonce=69799373]]></URL><ToUserName><![CDATA[1212]]></ToUserName><FromUserName><![CDATA[1212]]></FromUserName><CreateTime>1416034264</CreateTime><MsgType><![CDATA[text]]></MsgType><Content><![CDATA[1234565]]></Content><MsgId>12321312312</MsgId></xml>";
	
	//注意设置contentType: "application/json",负责服务器端出错
	$.ajax({url: url,processData: false,type:'post',contentType: "application/json", data:xml,success: function(data, textStatus){
		$("#msg").html($(data).text()); 
	}});
});
$("#btn3").click(function(e){
	var url="../qy/?";
	url+="msg_signature=92d78117ec30e9e55db25e343111be8a80c1186b&timestamp=1416139301&nonce=1318888434";
	var xml="<xml><ToUserName><![CDATA[wxb21adacab9c87404]]></ToUserName><Encrypt><![CDATA[x+cecPmzYQEu6NKD0F5j7n2uDwksrOWWl50dpbY5jMH3vmRrc6nhJScxj27ZztDjauQ++tTUPr4jeUk/5VqlBA1OOR4iICh67pGhEAoB0firFlikMTtj53B7nYNsCPYmfggr8g2sxqReQTfXpWa5z7CqPPNSevl0l8uc5cuy7lAinRsXFvbiT/msSGRXkrDfkZ+/DZAyA9IwwddR38B9yCXFoMX+2JkkVImBpoYHMl+n/pAFUN/zi4gIOCxeUkPaYynoHZfWCMYY+f/dXovU85saDKuWol0YEqf66WxPlwFMCIh+M5eqDKB6p5+1MOyjKrIXFja35BAlsiisPi66PQR6yMaD3w3aBN54Qbl3U0BGebM8AY/czVKgGwl711vMmYuduXWkWJxlkgfwjDLd3Z0XBNfQdkdkXEL1Bt1XIzeaeOdMkZFkhk671jU4OFTB0aaeEPM0ltQPPcprdTjarw==]]></Encrypt><AgentID><![CDATA[10]]></AgentID></xml>";
	
	//注意设置contentType: "application/json",负责服务器端出错
	$.ajax({url: url,processData: false,type:'post',contentType: "application/json", data:xml,success: function(data, textStatus){
		//debugger; 
		$("#msg").html($(data).text()); 
	}});
});


$("#btn4").click(function(e){
	$("#msg").html("...");
	var url="../api/createMenu?";
	$.post(url,{menu:$("#menu").text()},function(ret){
	    $("#msg").html(ret);
	});
});

$("#btn5").click(function(e){
	$("#msg").html("...");
	var url="../api/getMenu?";
	$.post(url,{},function(ret){
	    $("#msg").html(ret);
	});
});

</script>
</form>
</body>
</html>


